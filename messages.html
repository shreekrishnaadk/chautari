<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chautari - Interactive Profiles & Chat</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f0f2f5; }
  header { background:#196065; color:white; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; z-index:100;}
  header h1 { font-size:24px; margin:0; }
  nav ul { list-style:none; display:flex; gap:15px; margin:0; padding:0; }
  nav ul li a { color:white; text-decoration:none; padding:5px 10px; border-radius:5px; transition:background 0.3s; cursor:pointer;}
  nav ul li a:hover, nav ul li a.active-tab { background:#59baeb; }

  .container { display:flex; max-width:1000px; margin:20px auto; gap:20px; flex-wrap:wrap; }
  .sidebar { flex:1; min-width:200px; background:white; padding:20px; border-radius:8px; }
  .sidebar h3 { margin-bottom:10px; }
  .sidebar ul { list-style:none; padding:0; }
  .sidebar ul li { padding:5px 0; }
  .sidebar ul li a { text-decoration:none; color:#196065; cursor:pointer; display:block; padding:5px; border-radius:5px; }
  .sidebar ul li a:hover, .sidebar ul li a.active { background:#196065; color:white; }

  .main-section { flex:2; min-width:300px; background:white; padding:20px; border-radius:8px; transition: all 0.3s ease-in-out; }
  .profile-header { display:flex; align-items:center; gap:20px; margin-bottom:20px; }
  .profile-header img { width:100px; height:100px; border-radius:20%; object-fit:cover; transition: transform 0.3s; }
  .profile-header img:hover { transform: scale(1.1); }
  .profile-header h2 { margin:0; font-size:24px; color:#196065; }
  .profile p { line-height:1.6; margin-bottom:20px; }

  .post { background:#f0f2f5; padding:15px; border-radius:8px; margin-bottom:15px; transition: transform 0.3s, background 0.3s; }
  .post:hover { transform: scale(1.02); background:#e0f7f7; }
  .post-header { font-weight:bold; margin-bottom:10px; }
  .like-btn, .comment-btn { cursor:pointer; background: #196065; color:white; border:none; padding:5px 10px; border-radius:5px; margin-right:10px; transition:background 0.3s; }
  .like-btn:hover, .comment-btn:hover { background:#59baeb; }
  .comment-section { margin-top:10px; }
  .comment-section input { width:70%; padding:5px; margin-right:5px; }
  .comment-section button { padding:5px 8px; }

  .hidden { display:none; }

  /* Chat styles */
  #chat-container { display:flex; flex-direction:column; height:400px; border:1px solid #ccc; padding:10px; overflow-y:auto; background:#f9f9f9; border-radius:8px; }
  .chat-message { padding:5px 10px; margin-bottom:5px; border-radius:5px; max-width:80%; }
  .chat-user { background:#196065; color:white; align-self:flex-start; }
  .chat-me { background:#59baeb; color:white; align-self:flex-end; }
  #chat-input { display:flex; margin-top:10px; }
  #chat-input input { flex:1; padding:5px; border-radius:5px; border:1px solid #ccc; }
  #chat-input button { padding:5px 10px; border-radius:5px; margin-left:5px; border:none; background:#196065; color:white; cursor:pointer; }
  #chat-input button:hover { background:#59baeb; }

  @media (max-width:768px){ .container { flex-direction:column; } .profile-header { flex-direction:column; align-items:center; } .profile-header h2 { text-align:center; } }
</style>
</head>
<body>

<header>
  <h1>CHAUTARI</h1>
  <nav>
    <ul>
      <li><a class="active-tab" onclick="showTab('profile')">Profile</a></li>
      <li><a onclick="showTab('messages')">Messages</a></li>
      <li><a onclick="showTab('notifications')">Notifications</a></li>
    </ul>
  </nav>
</header>

<div class="container">
  <div class="sidebar">
    <h3>Friends</h3>
    <ul id="friends-list">
      <li><a onclick="showProfile('Ram Krishna Adhikari')">Ram Krishna Adhikari</a></li>
      <li><a onclick="showProfile('Swastika Chauhan')">Swastika Chauhan</a></li>
      <li><a onclick="showProfile('Shreyas Adhikari')">Shreyas Adhikari</a></li>
    </ul>
  </div>

  <!-- Profile Tab -->
  <div class="main-section" id="profile-tab">
    <div class="profile-header">
      <img src="default.jpg" alt="Profile Picture" id="profile-img">
      <h2 id="profile-name">Select a friend</h2>
    </div>
    <p id="profile-desc">Click on a friend’s name to see their profile details here.</p>
    <div id="posts-container"></div>
  </div>

  <!-- Messages Tab -->
  <div class="main-section hidden" id="messages-tab">
    <h2>Messages</h2>
    <div id="chat-container"></div>
    <div id="chat-input">
      <input type="text" placeholder="Type a message..." id="message-text">
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <!-- Notifications Tab -->
  <div class="main-section hidden" id="notifications-tab">
    <h2>Notifications</h2>
    <ul>
      <li>Ram Krishna liked your post.</li>
      <li>Swastika commented on your photo.</li>
      <li>Shreyas started following you.</li>
    </ul>
  </div>
</div>

<script>
const profiles = {
  "Ram Krishna Adhikari": { img: "ram.jpg", desc: "Hi, I'm Ram Krishna. I love web development and traveling!", posts:["Just finished learning JavaScript!","Traveling to Pokhara next week!"] },
  "Swastika Chauhan": { img: "sw.jpg", desc: "Hi, I'm Swastika. I love painting, photography, and hiking.", posts:["Completed a new painting today!","Hiking at Shivapuri was amazing!"] },
  "Shreyas Adhikari": { img: "shey.jpg", desc: "Hello! I'm Shreyas. I enjoy gaming and creating web apps.", posts:["Developed a new React app!","Playing Valorant with friends tonight."] }
};

function showProfile(name) {
  document.querySelectorAll('#friends-list a').forEach(a => a.classList.remove('active'));
  const link = Array.from(document.querySelectorAll('#friends-list a')).find(l=>l.textContent===name);
  link.classList.add('active');

  showTab('profile');

  const profile = profiles[name];
  document.getElementById("profile-img").src = profile.img;
  document.getElementById("profile-name").textContent = name;
  document.getElementById("profile-desc").textContent = profile.desc;

  const postsContainer = document.getElementById("posts-container");
  postsContainer.innerHTML='';
  profile.posts.forEach(postText=>{
    const div=document.createElement('div');
    div.className='post';
    div.innerHTML=`<div class="post-header">${name}</div><p>${postText}</p>
      <button class="like-btn" onclick="likePost(this)">Like (<span class="like-count">0</span>)</button>
      <div class="comment-section">
        <input type="text" placeholder="Write a comment..." class="comment-input">
        <button class="comment-btn" onclick="addComment(this)">Comment</button>
        <div class="comments"></div>
      </div>`;
    postsContainer.appendChild(div);
  });
}

function showTab(tab) {
  ['profile','messages','notifications'].forEach(t=>{
    document.getElementById(t+'-tab').classList.add('hidden');
    document.querySelector(`nav ul li a[onclick="showTab('${t}')"]`).classList.remove('active-tab');
  });
  document.getElementById(tab+'-tab').classList.remove('hidden');
  document.querySelector(`nav ul li a[onclick="showTab('${tab}')"]`).classList.add('active-tab');
}

function likePost(btn){
  const count=btn.querySelector('.like-count');
  count.textContent=parseInt(count.textContent)+1;
}

function addComment(btn){
  const input=btn.parentElement.querySelector('.comment-input');
  const text=input.value.trim();
  if(!text)return;
  const commentsDiv=btn.parentElement.querySelector('.comments');
  const p=document.createElement('p');
  p.textContent=text;
  commentsDiv.appendChild(p);
  input.value='';
}

// ✅ FIXED VERSION
function sendMessage() {
  const textBox = document.getElementById('message-text');
  const text = textBox.value.trim();
  if (!text) return;

  const chatContainer = document.getElementById('chat-container');

  const messageDiv = document.createElement('div');
  messageDiv.classList.add('chat-message', 'chat-me');
  messageDiv.textContent = text;

  chatContainer.appendChild(messageDiv);
  chatContainer.scrollTop = chatContainer.scrollHeight;

  textBox.value = "";

  // Simulated reply
  setTimeout(() => {
    const replyDiv = document.createElement('div');
    replyDiv.classList.add('chat-message', 'chat-user');
    replyDiv.textContent = "Got your message!";
    chatContainer.appendChild(replyDiv);
    chatContainer.scrollTop = chatContainer.scrollHeight;
  }, 1000);
}
</script>
